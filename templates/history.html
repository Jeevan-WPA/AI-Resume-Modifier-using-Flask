{% extends "base.html" %}

{% block content %}
<div class="animate-fade-in" style="width: 100%; display: flex; flex-direction: column; align-items: center;">

    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 2rem;">
        <h2 style="font-size: 2rem;">Application History</h2>
        <a href="/" class="btn-secondary" style="font-size: 0.9rem;">
            <i class="fa-solid fa-plus"></i> New Resume
        </a>
    </div>

    {% if jobs %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; width: 100%;">
        {% for job in jobs %}
        <div class="glass-panel"
            style="padding: 1.5rem; border: 1px solid var(--glass-border); transition: var(--transition);">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--text-main);">{{ job[2] }}</h3>
                <span
                    style="background: rgba(99, 102, 241, 0.2); color: #a5b4fc; font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 4px;">#{{
                    job[0] }}</span>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <p style="color: var(--text-muted); font-size: 0.95rem; margin-bottom: 0.25rem;">
                    <i class="fa-regular fa-building" style="width: 20px;"></i> {{ job[1] }}
                </p>
                <p style="color: var(--text-muted); font-size: 0.95rem; margin-bottom: 0.25rem;">
                    <i class="fa-solid fa-map-pin" style="width: 20px;"></i> {{ job[3] }}
                </p>
                <p style="color: var(--text-muted); font-size: 0.85rem;">
                    <i class="fa-regular fa-calendar" style="width: 20px;"></i> {{ job[4] }}
                </p>
            </div>

            <div style="display: flex; gap: 0.75rem;">
                <a href="/view_resume/{{ job[0] }}" target="_blank" class="btn-premium"
                    style="flex: 1; font-size: 0.9rem; padding: 0.6rem;">
                    <i class="fa-regular fa-eye"></i> View
                </a>
                <a href="{{ job[5] }}" target="_blank" class="btn-secondary" style="padding: 0.6rem 0.8rem;"
                    title="View Job Post">
                    <i class="fa-solid fa-external-link-alt"></i>
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="glass-panel" style="padding: 3rem; text-align: center; max-width: 500px;">
        <i class="fa-regular fa-folder-open"
            style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
        <h3 style="color: var(--text-muted);">No history found</h3>
        <p style="color: var(--text-muted); margin-bottom: 2rem;">You haven't generated any resumes yet.</p>
        <a href="/" class="btn-premium">Generate Your First Resume</a>
    </div>
    {% endif %}
</div>
{% endblock %}